create database base_keveo;
use base_keveo;
CREATE  TABLE MENU(
    ID INTEGER auto_increment,
    ACTIVE INTEGER,
    DESCRIPTION VARCHAR(255) NOT NULL,
    APP_ORDER INTEGER,
    URL VARCHAR(255),
    PARENT_ID INTEGER,
    CONSTRAINT CONSTRAINT_2 PRIMARY KEY(ID)
);             
   
-- 6 +/- SELECT COUNT(*) FROM PUBLIC.MENU;    
INSERT INTO MENU VALUES
(1, 1, 'Home', 0, '/', NULL),
(2, 1, 'Tasks', 1, '/tasks', NULL),
(3, 1, 'Admin', 10, '/admin', NULL);
             
CREATE TABLE MENU_ROLES(
    MENU_ID INTEGER NOT NULL,
    ROLES_ID INTEGER NOT NULL
);              
ALTER TABLE MENU_ROLES ADD CONSTRAINT CONSTRAINT_4 PRIMARY KEY(MENU_ID, ROLES_ID);  
-- 11 +/- SELECT COUNT(*) FROM PUBLIC.MENU_ROLES;             
 
CREATE TABLE ROLE(
    ID INTEGER auto_increment,
    ROLE_NAME VARCHAR(255) NOT NULL,
    CONSTRAINT CONSTRAINT_26 PRIMARY KEY(ID)
);   
      
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.ROLE;    
INSERT INTO ROLE VALUES
(1, 'ROLE_ADMIN'),
(2, 'ROLE_USER');     
        
CREATE  TABLE USER(
    ID INTEGER auto_increment,
    ACTIVE BOOLEAN NOT NULL,
    DATE DATE,
    PASSWORD VARCHAR(255) NOT NULL,
    USER_NAME VARCHAR(255) NOT NULL,
    USER_SURNAME VARCHAR(255),
    USER_AGE INT,
    USER_SEX BOOLEAN,
    USER_EMAIL VARCHAR(255),
	CONSTRAINT CONSTRAINT_27E PRIMARY KEY(ID)
);          

-- 8 +/- SELECT COUNT(*) FROM PUBLIC.USER;    

CREATE TABLE USER_ROLES(
    USERS_ID INTEGER NOT NULL,
    ROLES_ID INTEGER NOT NULL
);             
ALTER TABLE USER_ROLES ADD CONSTRAINT CONSTRAINT_C PRIMARY KEY(USERS_ID, ROLES_ID); 
-- 9 +/- SELECT COUNT(*) FROM PUBLIC.USER_ROLES;                   
 
ALTER TABLE USER_ROLES ADD CONSTRAINT FKJ9553ASS9UCTJRMH0GKQSMV0D FOREIGN KEY(ROLES_ID) REFERENCES ROLE(ID) ;     
ALTER TABLE USER_ROLES ADD CONSTRAINT FK7ECYOBAA59VXKXCKG6T355L86 FOREIGN KEY(USERS_ID) REFERENCES USER(ID) ;     
ALTER TABLE MENU_ROLES ADD CONSTRAINT FKQ7K54HB6F3NGDBFPBLWJ68BHG FOREIGN KEY(MENU_ID) REFERENCES MENU(ID) ;      
ALTER TABLE MENU ADD CONSTRAINT FKGEUPUBDQNCC1LPGF2CN4FQWBC FOREIGN KEY(PARENT_ID) REFERENCES MENU(ID) ;          
ALTER TABLE MENU_ROLES ADD CONSTRAINT FKAUV6MBPEO296VHBM7AVTOI3O8 FOREIGN KEY(ROLES_ID) REFERENCES ROLE(ID) ;  
